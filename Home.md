> -- Что наша жизнь?

> -- Игра!

> -- А какова её цель?

> -- Хм... Полагаю захватить мир.

> -- А как же те, кто не хочет захватывать мир?

> -- Они и есть этот мир. А какое удовольсвие они находят в этой игре -- это ты у НИХ спроси.

> *[из разговора двух программистов]*


# SubLayers

SubLayers -- это сетевая многопользовательская ролевая игра с элементами стратегии реального времени и геопривязкой игрового мира к реальным планетарным координатам.

В игре максимально развиты следующие жанровые направления:

- Стратегия реального времени

- Экономическая стратегия

- MMORPG

- Tower defence


## Легенда

Оказывается наш мир бесконечномерен, а материя в нём не ограничиваетя присутствием в трёх известных ранее пространственных измерениях. 
Всё сущее далеко простирается в неведомые и незримые глубины подпространственных размерностей.

Ученые смогли научиться ограниченно оперировать свойствами [объектов](#items) и [материи](#material) ближних подпространственных слоёв. 
Разработаны [сенсоры](#sensor) и механизмы, способные отображать для людей средствами дополненной реальности какие-то аспекты и явления, 
неизвестные и невидимые ранее. Люди открыли для себя огромный новый мир, который, оказывается, тесно и плотно переплетается с наблюдаемой реальностью.

В обнаруженных слоях реальности были найдены ресурсы и [материалы](#material) с ценными и непредставимыми ранее свойтсвами. 
Появляется возможность эти ресурсы добывать, исследовать, использовать.

Информация о сложившемся положении вещей начинает постепенно, а затем и лавинообразно утекать из под покровов секретности.
Доступность и относительная простота технологий взаимодействия с ближними слоями параллельной реальности, теоретические предпосылки, 
указывающие на безопасность экспериментов, высокий спрос на ресурсы “параллельного слоя” породили массовую заинтересованность простых обывателей. 

Всё большее количество людей превращает добычу ресурсов “параллельного слоя” в увлекательное и выгодное хобби. Сообщество энтузиастов разрабатывает 
стандартизованный инструментарий для комфортных манипуляций в “параллельных слоях”.


## Геймплей

Игровой эккаунт привязан к текущим географическим координатам пользователя, которые в реальном времени передаются на сервер 
игровым клиентом. Т.е. Игроки свободно перемещаются по карте в соответствии со своими реальными географическими координатами.

Играя в Sublayers вы можете реализовтаь свои интересы, примерив на себя множество различных ролей:

- занимаясь постройкой и обслуживанием добывающих ферм, перерабатывающих заводов;

- обороняя и укрепляя свои постройки фортификационными станциями и боевыми роботами;

- орагнизуя торговлю (ресурсами, игровыми предметами, услугами);

- решая транспортные задачи (лично или посредством роботизированных караванов);

- занимаясь пиратством, грабежом караванов и ферм;

- организуя фракции и коалиции для контроля территорий и ресурсов;

- занимаясь другими смешанными и пограничными видами деятельности (шпионаж, заговоры, партизанские вылазки, бизнес).

Всё как в реальной жизни.

Основные операции в игровой логике:

- перемещение по карте, наблюдение за окружающей суб-реальностью;

- сбор поверхностных ресурсов, предметов; передача предметов между игроками;

- сборка (крафт) и установка станций различной специализации;

- сборка (крафт) и активация роботов различной специализации;

- настройка и управление станциями: включение и отключение основноых функций, определение простых алгоритмов поведения, настройка прав доступа,
указание целей для атаки;

- настрйока и управление роботами: демонтаж, указание маршрутов перемещения, определение простых алгоритмов поведения, настройка прав доступа,
указание целей для атаки или защиты;

- локальная передача предметов между инвентарями роботов, станций-хранения и личным инвентарем;

- ...


### Инвентарь

При себе игрок имеет инвентарь ограниченной вместимости (аналог инвентаря minecraft). В инвентаре могут содержаться [предметы](#items).

Существует способ передачи предметов непосредственно между инвентарем игрока и инвентарем станции, робота или другого игрока в пределах локальной досягаемости.


### Предметы

Предмет может быть выброшен на карту. В этом случае его может поднять другой игрок или [робот](#bot), оборудованный специальным [модулем](#module).

Существует интерфейс передачи предметов непосредственно между инвентарями игроков и роботов в пределах [зоны локальной досягаемости](#operational-zone).

Существует особый вид предметов, которые могут быть [установлены](#deploy) на карту. При установке предмета применяется его основная функция:

- [бомба](#bomb) взрывается,

- [мина](#sensor-bomb) взводится,

- [станции](#station) устанавливается,

- [роботы](#bot) развёртывается в мобильное положение.

- и т.д.


### Ресурсы

В игре на данном этапе существует 4 вида ресурсов:

- Энергия

- Металл

- Органика

- Радионуклиды

В игре ресурсы представлены [месторождениями](#lode) и частицами разбросанными по поверхности (по карте).

Частицы ресурсов могут быть собраны игроком или роботом, оснащенным специальным модулем. При этом они помещаются в инвентарь в виде [предмета](#items).

Ресурс может быть добыт станцией с [буровым модулем](#derrick). При этом частицы ресурса выбрасываются на поверхность в радиусе действия станции.


### Месторождения

Месторождения тех или иных ресурсов размещены на карте не случайно, а привязаны к геополитической карте мира:

- Металлы в игре будут чаще попадаться в регионах, где этот ресурс на самом деле встречается в виде руд черных или цветных металлов.

- Месторождения органики будут попадаться чаще и в больших количествах в местах залегания нефтяных шельфов, в местах добычи природного газа, торфа.
Кроме того, органику можно добывать в местах расположения обширных лесов, болот, в экваториальных зонах мирового океана. Любые регионы нашей планеты,
выглядящие на спутниковых снимках зелёными, -- вероятное место для того чтобы встретить обширные месторождения органики.

- Радионуклиды -- редкий и ценный ресурс в игре. Его месторождения можно найти в районах залегания и добычи радиоактивных руд IRL. Также есть шанс
найти небольшие месторождения в районе АЭС и в Чернобыльской зоне.

Некоторые месторождения могут быть возобновляемыми. Как правило они маломощны и связаны с живой растительной ораникой (леса, поля).

Технически месторождение в игре представляет собой набор круговых градиентов с затуханием от центра, объединенных по функции максимума.
Градиент характеризуется координатами центра, насыщеностью центра, расстоянием до полного затухания (диаметром), скоростью возобновления, пределом возобновления.

Интенсивная добыча может истощать месторождение. От насыщености зависит скорость извлечения ресурса на поверхность (производительность буровой станции).


### Крафт

Создание одних предметов на основе или из других по определенному "рецепту". Осуществляется игроком через интерфейс или автоматически 
специализированной станцией (заводом) по предварительно заданной программе. Ингридиенты извлекаются из локального инвентаря, результат попадает туда же.

Рассмотрим механизм создания станций и роботов. Такие объекты строются из базовой платформы и модулей. У роботов в качестве базовой используется мобильная платформа,
а у станций стационарная.

Среди модулей могут быть:

- хранилище (инвентарь);

- турель;

- силовой щит;

- буровой модуль (для каждого вида ресурсов свой);

- радар (для расширения области видимости вокруг юнита с радаром);

- трансивер (для увеличения максимального расстояния линка);

- ...


### Станции

Станция -- это статичное сооружение, жестко привязанное к фиксированным координатам и созданное на основе ["стационарной платформы"](#stationary_platform).
Для активации устанавливается из инвентаря игроком в его локальной позиции.
После установки может управляться игроком в пределах линка.

Станции по компоновке подразделяются на:

- *активно-защитные* - турели;

- *пассивно-защитные* - силовой щит, ослабевающий урон при атаке агрессора;

- *станции хранения* - расширенный по объёму инвентарь для хранения предметов;

- *буровые станции* - фермы по добыче того или иного ресурса;

- *заводы* - автоматизированный крафт предметов на основе других предметов;

- *ретрансляторы* - удлинение управляющего линка от игрока до управляемого юнита (станции или робота);

- *радары* - расширение для игрока области видимости вокруг точки установки.

- ...

Функции управления:

- включить/выключить помодульно или целиком;

- демонтировать;

- функции модулей, входящих в состав станции.


### Роботы

Робот -- это подвижный управляемый юнит, созданный на основе ["мобильной платформы"](#mobile_platform). Для активации устанавливается из инвентаря игроком в его локальной позиции.
После установки может управляться игроком в пределах линка.

Роботы по компоновке подразделяются на:

- *активно-защитные роботы* с турелью в комплектации;

- *пассивно-защитные роботы* с генератором силового щита в комплектации;

- *роботы-коллекторы*, снабженные инвентарем и манипулятором для сбора, выдачи и обмена предметами;

- *роботы-геологи*, снабженные компактной универсальной буровой установкой и способные разведывать месторождения;

- *роботы-курьеры*, снабженные нинвентарем и ускорителем для эффективной доставки предметов;

- *роботы-разведчики*, снабженные ускорителем и радаром для эффективной разведки местности.

Управление роботом заключается в передаче роботу команд или программ, сожержащих алгоритм поведения.

Команды:

- Включить/выключить указанный модуль.

- Двигаться в указанную точку.

- Следовать за указанным юнитом или за самим игроком на указанном расстоянии (по возможности).

- Убегать от указанного юнита.

- Атаковать указанных юнитов (станции, роботы) в указанном порядке. Если юнит не указан или указана точка на карте,
то атакованы будут все вражеские юниты видимые из текущей или указанной точки на карте.
                                                                   
- Защищать указанного юнита (станцию, робота, игрока) или точку - атака агрессора, нападающего на подзащитного или
на любого союзного юнита в пределах видимости вокруг указанной или текущей точки.

- Собирать ресурсы в указанном регионе.

- Подобрать указанный предмет.

- Выбросить указанный предмет из инвентаря на карту.

- Передать предмет из своего инвентаря в инвентарь другого юнита или игрока.

- Зарядить указанного юнита энергией из своего инвентаря.

- Зарядить себя энергией из своего инвентаря.


### Группы

В игровой логике предусмотрено создание групп, в которые могут быть включены любые игроки.

По области видимости группы подразделяютя на:

- скрытые - группу может видеть только её создатель;

- частные - группу видят, все, но перечень её членов видят только её члены;

- публичные - группа и перечень её членов видны всем;

Предопределен набор служебных групп:

- !agressors - группа объединяет игроков, атаковавших ваши юниты;

- !enemy - граппа врагов;

- !confederate - группа союзников;

- !alien - все, кроме союзников;

- !neutral - все, кроме врагов и союзников;

- !all - все;

- !nobody - пустая группа;

- !mine - группа, включающая только самого игрока.


### Права

При монтаже робота или башни определяется групповая политика доступа к этим объектам.

Уровни доступа:

- Демонтаж и настройка (в том числе уровней доступа).

- Управление - отдача управляющих команд, не связанных с демонтажом.

- Класть в инвентарь.

- Брать из инвентаря.

Для каждого уровня доступа может быть определен набор групп и пользователей, которым будут доступны соответствующие операции над объектом.

### Настройки целей атаки

Аналогично правам доступа для юнитов, если в их составе есть боевые модули, при развёртывании можно указать набор групп и пользователей,
по отношению к которым юнит должен себя вести агрессивно.


### Политика

Игроки могут объединятся в группы и создавать партии (гильдии, сообщества, фракции).

Каждая партия имеет отличительные признаки:

- Название

- Логотип (герб, флаг)

- Описание

Партию может основать каждый игрок который удовлетворяет некоторым условиям (достигнут необходимый уровень, имеется необходимое количество ресурсов и тд и тп).
Он становится руководителем (председателем, главой) партии и может принимать или исключать игроков из своей партии, а так же давать привелигированное положение в партии.
Партии могут объединятся в союзы (коалиции).


### Рейтинг

В игре есть возможность следить за индивидуальным рейтингом игрока, партии, союза.
Рейтинг имеет несколько типов в зависимости от того что участвует в его вычислении (ресурсы, здания, техника).
Так же есть возможность видеть рейтинг по населенному пункту/области/стране/миру.


## Дополнительные материалы:
* [План работ](plan)
* [Функциональное описание интерфейса клиента](activity)
* [Концепции интерфейса клиента](interface)
* [Банк идей](features)
* [Баланс](balancing)
* [Сторонние ресурсы](foreign_resources)
